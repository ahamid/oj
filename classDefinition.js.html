<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OJ Source: core/definitions/classDefinition.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">OJ</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="internalNameSpace.html">internalNameSpace</a>
						</li>
						
						<li>
							<a href="Library.html">jQuery Library</a>
						</li>
						
						<li>
							<a href="OJ.html">OJ</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="_dataTypeCollectionIIFE-DataTypeCollection.html">DataTypeCollection</a>
						</li>
						
						<li>
							<a href="_modelIIFE-DataModel.html">DataModel</a>
						</li>
						
						<li>
							<a href="makeNameSpace.Base.html">Base</a>
						</li>
						
						<li>
							<a href="makeNameSpace.Class.html">Class</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: core/definitions/classDefinition.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript linenums">/* jshint undef: true, unused: true */
/* global n$:true, window:true, Ext:true, $: true */

(function _classDefinitionIIFE(n$) {

    /**
     * Private constructor to create an object suitable for defining a new class
     * @param name {String} The name of this class
     * @param extend {String} The ExtJS class to extend/copy
     * @param requires {Array} [requires] An array of dependencies
     * @param alias {Array} [alias] An array of alternate names for this class
     * @param id {String} [id] A unique id for this class
     * @param store {n$.store} [store] A data store for this class
     * @param plugins {Array} [plugins] An array of plugins to initialize with new instances of this class
     * @param constant {String} [constant] A n$.constants constant to constrain property additions
     * @param namespace {String} A n$ namespace to constrain subscribers
     * @param onDefine {Function} [onDefine] A method to call when the class definition is defined on the Ext namespace
     * @param debug {Boolean} [debug=false] For development debugging purposes. If true, output log content.
    */
    var ClassDefinition = function(name, extend, requires, alias, id, store, plugins, constant, namespace, onDefine, debug) {
        var that = this;
        var classDef = {};

        /**
         * Set of properties most Ext classes share
        */
        if (extend)     { n$.property(classDef, 'extend', extend); }
        if (requires)   { n$.property(classDef, 'requires', requires); }
        if (alias)      { n$.property(classDef, 'alias', alias); }
        if (id)         { n$.property(classDef, 'id', id); }
        if (plugins)    { n$.property(classDef, 'plugins', plugins); }
        if (store)      { n$.property(classDef, 'store', store); }

        /**
         * initComponents are created when the class is instanced; they are not part of the class definition--except as callbacks
         * This is unusual. Most classes do not need this mechanism. See tableGrid for example.
        */
        var initComponents = [];
        n$.property(that, 'addInitComponent', function (method) {
            if (method) {
                initComponents.push(method);
            }
        }, false, false, false);

        /**
         * We don't allow subscribers to be defined ad hoc; and if they are defined, they must be defined on the namespace subscriber object
        */
        if (namespace && n$[namespace]) {
            var subscribers = n$[namespace].subscribers.subscribers();
            n$.property(that, 'subscribers', subscribers);
            n$.property(that.subscribers, 'exception', function() {
                n$.console.error('An error occurred in ' + name + '.', arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
            });
            /**
             * Interface to Add to the properties that will become part of the Ext class
            */
            if (n$[namespace].constants.properties) {
                n$.property(that, 'addProp', function (propName, value) {
                    if (!(n$[namespace].constants.properties.has(propName))) {
                        throw new Error('Property named "' + propName + '" has not be defined on n$.' + namespace + '.constants.properties.');
                    }
                    n$.property(classDef, propName, value);
                }, false, false, false);
            }
            //Convenience access to the constant properties on the instance
            n$.property(that, 'props', n$[namespace].constants.properties);
            
            //Convenience access to the constant subscribeables on the instance
            n$.property(that, 'subs', n$[namespace].constants.subscribers);
        }
        
        /**
         * init must be manually called when the class is ready to be constructed (e.g. defined on Ext)
        */
        n$.property(that, 'init', function () {
            n$.property(classDef, 'initComponent', function () {
                var them = this;
                if (initComponents.length > 0) {
                    n$.each(initComponents, function (func) {
                        func(them);
                    });
                }
                them.callParent(arguments);
            });

            if (subscribers && Object.keys(subscribers).length > 0) {
                /**
                 * Bit of a hack; but grids are a special case.
                */
                if (namespace === 'grids') {
                    n$.property(classDef, 'viewConfig', {});
                    n$.property(classDef.viewConfig, 'listeners', that.subscribers); //Subscribers === listeners in Ext
                } else {
                    n$.property(classDef, 'listeners', subscribers);
                }
            }
            
            if (onDefine) {
                onDefine(classDef, that);
            }

            var ret = Ext.define(name, classDef);
            
            return ret;
        });

        return that;
    };

    n$.instanceOf.register('ClassDefinition', ClassDefinition);

    /**
     * Define declares a new class on the ExtJs namespace
     * @param def {Object} defintion object with possible properties: def.name def.extend, def.requires, def.alias, def.id, def.store, def.plugins, def.constant, def.onDefine
     * @param def.name {String} The name of this class
     * @param def.extend {String} The ExtJS class to extend/copy
     * @param def.requires {Array} [def.requires] An array of dependencies
     * @param def.alias {Array} [def.alias] An array of alternate names for this class
     * @param def.id {String} [def.id] A unique id for this class
     * @param def.store {n$.store} [def.store] A data store for this class
     * @param def.plugins {Array} [def.plugins] An array of plugins to initialize with new instances of this class
     * @param def.constant {String} [def.constant] A n$.constants constant to constrain property additions
     * @param def.namespace [String] A n$ namespace to constrain subscribers
     * @param def.onDefine {Function} [def.onDefine] A method to call when the class definition is defined on the Ext namespace
    */
    n$.register('classDefinition', function(def) {
        if(!def) {
            throw new Error('Cannot create a definition without parameters.');
        }
        if (def.id) {
            def.name = 'Ext.' + n$.name + '.' + def.id;
            def.alias = ['widget.' + def.id];
        }
        if (!(typeof def.name === 'string')) {
            throw new Error('Cannot define a class without a name');
        }
        var ret = new ClassDefinition(def.name, def.extend, def.requires, def.alias, def.id, def.store, def.plugins, def.constant, def.namespace, def.onDefine);
        return ret;
    });

}(window.$nameSpace$));
</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		OJ is Public Domain software. Please take generously.
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a>
		on Wed Jul 24 2013 20:27:44 GMT-0400 (EDT) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
